# Spring  

**AOP 织入切面的方法：**

1. 编译期织入，要求使用特殊的Java编译器，AspectJ是其中的代表者；
2. 类装载期织入，要求使用特殊的类装载器，AspectJ和AspectWerkz是其中的代表者；
3. 动态代理织入，在运行期为目标类添加增强生成子类的方式，spring AOP采用动态代理织入切面。

---

**Spring AOP使用了两种代理机制：** 

1. 基于JDK的动态代理，
2. 基于CGLib的动态代理， 

之所以需要两种代理机制，很大程度上是因为JDK本身只提供基于接口的代理，不支持类的代理。 

---

**JDK动态代理：**

涉及到 java.lang.reflect 包中的两个类：

- Proxy
   - 为 InvocationHandler 实现类动态创建一个符合某一接口的代理实例。

- InvocationHandler
   - 一个接口，可以通过实现该接口定义横切逻辑，并通过反射机制调用目标类的代码，动态地将横切逻辑和业务逻辑织在一起。  
 
---
 
这里给出一个JDK 动态代理的例子。  
具体的实现逻辑可参看代码注释。


